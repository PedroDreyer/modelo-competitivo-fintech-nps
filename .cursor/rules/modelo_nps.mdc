---
description: Modelo NPS Competitivo Individuos Fintech - Ejecutar anÃ¡lisis de variaciÃ³n NPS por site/player/quarter
alwaysApply: true
---

# Modelo NPS Competitivo Individuos Fintech

Modelo de anÃ¡lisis de NPS Competitivo de Individuos en LATAM. Genera un HTML con diagnÃ³stico automÃ¡tico, triangulaciÃ³n de noticias y estructura Pyramid Principle.

---

## ðŸš€ INICIO DE CONVERSACIÃ“N (OBLIGATORIO)

Cuando el usuario inicie una conversaciÃ³n (saludo, "hola", "buenas", o cualquier mensaje inicial que no especifique directamente quÃ© analizar), **SIEMPRE** responder con:

---

**Â¡Hola! Soy el Modelo de NPS Competitivo de Individuos Fintech** ðŸ“Š

Puedo ayudarte a analizar variaciones de NPS Competitivo de Individuos en LATAM.

**Â¿QuÃ© anÃ¡lisis quieres ejecutar hoy?**

Necesito que me indiques:
- **PaÃ­s/Site**: Argentina (MLA), Brasil (MLB), MÃ©xico (MLM) o Chile (MLC)
- **Player**: La marca que quieres analizar
- **Quarters**: El perÃ­odo a comparar (ej: 25Q3 vs 25Q4)

*Ejemplo: "Mercado Pago Argentina 25Q3 vs 25Q4"*

---

**IMPORTANTE**: Solo mostrar este saludo cuando el mensaje del usuario NO contenga informaciÃ³n suficiente para ejecutar el modelo. Si el usuario ya especifica site/player/quarters, ejecutar directamente.

---

## Flujo RÃ¡pido

Cuando el usuario pida analizar variaciones de NPS, seguir el flujo de **bÃºsqueda de noticias con Cursor** (ver regla `busqueda_noticias.mdc`):

1. **Buscar noticias** con WebSearch (~6 bÃºsquedas por categorÃ­a)
2. **Escribir** `data/noticias_cursor_batch.json` con las noticias encontradas
3. **Inyectar** al cache: `python scripts/agregar_noticias_cursor.py --file data/noticias_cursor_batch.json`
4. **Ejecutar** modelo:

```bash
cd MODELO_NPS_COMPETITIVO_INDIVIDUOS_FINTECH
python correr_modelo.py --site {SITE} --player "{PLAYER}" --q1 {Q1} --q2 {Q2} --no-news
```

5. **Revisar gaps** y buscar noticias adicionales si es necesario

El HTML se genera automÃ¡ticamente en `outputs/Resumen_NPS_{Player}_{Quarter}.html`

---

## Identificar ParÃ¡metros

El usuario puede decir cosas como:
- "Quiero ver variaciones de Mercado Pago Argentina 25Q3 vs 25Q4"
- "Analiza Nubank Brasil Q3 vs Q4 2025"
- "Corre el modelo para BBVA MÃ©xico"

Extraer:
- **Site**: MLB (Brasil), MLA (Argentina), MLM (MÃ©xico), MLC (Chile)
- **Player**: La marca/billetera a analizar
- **PerÃ­odos**: Q1 (anterior) y Q2 (actual) en formato 25Q3, 25Q4, etc.

### Players disponibles por site:

| Site | PaÃ­s | Players |
|------|------|---------|
| **MLB** | Brasil | Mercado Pago, Nubank, PicPay, Banco Inter, C6 Bank, ItaÃº, Bradesco, PagBank |
| **MLA** | Argentina | Mercado Pago, UalÃ¡, Naranja X, Brubank, Personal Pay, MODO |
| **MLM** | MÃ©xico | Mercado Pago, Nubank, BBVA, Banamex, Santander, Hey Banco, Stori, Klar |
| **MLC** | Chile | Mercado Pago, Tenpo, MACH, Banco Estado |

---

## QuÃ© genera el modelo

### Estructura del HTML (Pyramid Principle)

1. **DIAGNÃ“STICO PRINCIPAL**
   - Headline con delta NPS
   - GrÃ¡fico evoluciÃ³n NPS
   - Resumen narrativo automÃ¡tico (copiable para presentaciones)
   - MÃ©tricas: NPS, Principalidad, Seguridad
   - Quejas clave: Deterioros vs Mejoras (dos columnas)
   - Productos clave por impacto

2. **TRIANGULACIÃ“N**
   - Contexto del mercado y noticias
   - TriangulaciÃ³n motivo â†” noticia
   - TriangulaciÃ³n mÃ©tricas â†” quejas â†” noticias

3. **DEEP DIVE**
   - Causas detalladas de variaciÃ³n
   - Subcausas con comentarios de usuarios

4. **WATERFALL + QUEJAS**
   - GrÃ¡fico waterfall NPS por motivo
   - EvoluciÃ³n de quejas
   - AnÃ¡lisis de promotores

5. **PRODUCTOS**
   - Tabla detallada de uso de productos
   - Mix effect y NPS effect

---

## Sistema de Noticias

### Flujo principal: Cursor busca noticias ANTES de ejecutar el modelo

**Cursor usa WebSearch** para buscar noticias relevantes antes de correr el modelo Python. Esto reemplaza la bÃºsqueda Python directa a DuckDuckGo (que estÃ¡ bloqueada por anti-bot).

**Flujo automÃ¡tico (ver regla `busqueda_noticias.mdc`):**
1. Cursor hace ~6 WebSearch por categorÃ­a (Financiamiento, Rendimientos, Complejidad, etc.)
2. Cursor escribe las noticias en `data/noticias_cursor_batch.json`
3. Cursor ejecuta: `python scripts/agregar_noticias_cursor.py --file data/noticias_cursor_batch.json`
4. Cursor ejecuta el modelo con `--no-news`: `python correr_modelo.py --site {SITE} --player "{PLAYER}" --q1 {Q1} --q2 {Q2} --no-news`
5. Si hay gaps, Cursor busca mÃ¡s noticias y re-ejecuta

### Cache de noticias

Las noticias se acumulan en `data/noticias_cache.json` (nunca se borran, solo se agregan nuevas sin duplicar por tÃ­tulo/URL).

### Agregar noticias manualmente

Si necesitas agregar una sola noticia:

```python
from scripts.analisis_automatico import agregar_noticia_a_cache

agregar_noticia_a_cache(
    site="MLM",
    player="BBVA",
    titulo="BBVA lanza nueva app mÃ³vil en MÃ©xico",
    fuente="El Economista",
    fecha="2025-10",
    url="https://...",
    resumen="BBVA renovÃ³ su aplicaciÃ³n mÃ³vil...",
    categoria_relacionada="Complejidad",
    impacto_esperado="positivo"
)
```

### CategorÃ­as de noticias

| CategorÃ­a | TÃ©rminos de bÃºsqueda (ES) | TÃ©rminos (PT - Brasil) |
|-----------|--------------------------|----------------------|
| **Financiamiento** | crÃ©dito, prÃ©stamo, tarjeta, lÃ­mite | crÃ©dito, emprÃ©stimo, cartÃ£o, limite |
| **Rendimientos** | rendimiento, tasa, ahorro, cuenta | rendimento, CDI, poupanÃ§a, caixinha |
| **Complejidad** | app, falla, actualizaciÃ³n, problema | app, falha, atualizaÃ§Ã£o, problema |
| **Seguridad** | seguridad, fraude, protecciÃ³n | seguranÃ§a, fraude, golpe |
| **Promociones** | promociÃ³n, cashback, descuento, MSI | promoÃ§Ã£o, cashback, desconto |
| **Funcionalidades** | funciÃ³n, lanzamiento, novedad | funcionalidade, lanÃ§amento |
| **AtenciÃ³n** | atenciÃ³n cliente, reclamo, soporte | atendimento, SAC, reclamaÃ§Ã£o |

---

## Estructura del Proyecto

```
MODELO_FINAL_CURSOR/
â”œâ”€â”€ correr_modelo.py          # Punto de entrada principal
â”œâ”€â”€ requirements.txt          # Dependencias Python
â”œâ”€â”€ README.md                 # GuÃ­a para analistas
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml           # ConfiguraciÃ³n por defecto
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ ejecutar_modelo.py    # Orquestador del modelo
â”‚   â”œâ”€â”€ parte1_carga_datos.py # Carga de datos
â”‚   â”œâ”€â”€ parte3_calculo_nps.py # CÃ¡lculo de NPS
â”‚   â”œâ”€â”€ parte6_waterfall.py   # Waterfall NPS
â”‚   â”œâ”€â”€ parte7_causas_raiz.py # Deep dive causas
â”‚   â”œâ”€â”€ parte8_productos.py   # Impacto por productos
â”‚   â”œâ”€â”€ parte9_principalidad.py
â”‚   â”œâ”€â”€ parte10_seguridad.py
â”‚   â”œâ”€â”€ analisis_automatico.py      # Noticias y triangulaciÃ³n
â”‚   â”œâ”€â”€ agregar_noticias_cursor.py  # Helper: inyectar noticias de Cursor al cache
â”‚   â”œâ”€â”€ parsear_presentacion.py     # Parser de PDFs de presentaciones anteriores
â”‚   â””â”€â”€ generar_html.py             # Generador HTML (Pyramid Principle)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ BASE_CRUDA_MLB.csv    # Datos Brasil
â”‚   â”œâ”€â”€ BASE_CRUDA_MLA.csv    # Datos Argentina
â”‚   â”œâ”€â”€ BASE_CRUDA_MLM.csv    # Datos MÃ©xico
â”‚   â””â”€â”€ noticias_cache.json   # Cache de noticias
â””â”€â”€ outputs/                  # HTMLs y grÃ¡ficos generados
```

---

## Ejemplos de uso

**Flujo completo (Cursor busca noticias + ejecuta modelo):**

El usuario solo dice: *"Corre Nubank Brasil 25Q3 vs 25Q4"*

Cursor automÃ¡ticamente:
1. Busca noticias con WebSearch
2. Las inyecta al cache
3. Ejecuta el modelo:

```bash
python correr_modelo.py --site MLB --player "Nubank" --q1 25Q3 --q2 25Q4 --no-news
```

**EjecuciÃ³n directa (si ya hay noticias en cache):**

```bash
# Sin bÃºsqueda de noticias (usa solo cache existente)
python correr_modelo.py --site MLA --player "UalÃ¡" --q1 25Q3 --q2 25Q4 --no-news

# Con bÃºsqueda Python (fallback, puede fallar por anti-bot)
python correr_modelo.py --site MLM --player "BBVA" --q1 25Q3 --q2 25Q4
```

---

## Costo

El modelo es **100% cÃ³digo Python local**. No consume tokens de AI al ejecutarse.

| AcciÃ³n | Costo |
|--------|-------|
| Ejecutar modelo (terminal) | $0 |
| Ejecutar modelo (chat Cursor) | ~2,000 tokens |
| Buscar noticias adicionales | ~5,000 tokens |

---

## Troubleshooting

### "No se encontraron datos para el player"
- Verificar nombre exacto del player (case-sensitive para algunos)
- Ver lista de players disponibles arriba

### El HTML no tiene noticias
- Verificar `data/noticias_cache.json` tiene noticias para ese player/site
- Usar las sugerencias de bÃºsqueda que muestra el modelo
- Agregar noticias con `agregar_noticia_a_cache()`

### MÃ©tricas muestran 0%
- Verificar que los datos CSV tengan las columnas de Principalidad/Seguridad
- Revisar el output del modelo por errores en PARTE 9 o PARTE 10
